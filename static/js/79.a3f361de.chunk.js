(self.webpackChunkxipay_web=self.webpackChunkxipay_web||[]).push([[79],{40370:function(e,t,n){"use strict";n.r(t);var r=n(24611),s=n(53755),a=n(23680),c=n(76870),i=n(79428),o=n(49111),u=n(69935),l=n(13409),d=n.n(l),f=n(53071),p=n(44512),h=(n(64406),n(54006)),m=n.n(h),g=n(99033),x=n(26863),v=n(96340),w=n(79153),y=n(5779),b=n(52516);t.default=function(){var e=(0,i.TH)().key,t=(0,i.s0)(),n=(0,g.I0)(),l=(0,g.v9)((function(e){return e.auth})).isAuthenticated;(0,c.useEffect)((function(){return(0,o.Z)("./assets/js/vendor.min.js"),(0,o.Z)("./assets/js/theme.min.js"),function(){(0,u.Z)("./assets/js/vendor.min.js"),(0,u.Z)("./assets/js/theme.min.js")}}),[e]);var h=(0,c.useState)(null),k=(0,a.Z)(h,2),E=k[0],Z=k[1],S=(0,c.useState)(),j=(0,a.Z)(S,2),N=j[0],I=j[1],K=(0,c.useState)(),P=(0,a.Z)(K,2),A=(P[0],P[1]),C=(0,c.useState)(),Q=(0,a.Z)(C,2),T=Q[0],D=Q[1];(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f.E.serviceProvider.init({skipInit:!0}),"/auth"!==window.location.pathname||!window.location.hash.includes("#state")){e.next=12;break}return e.next=5,f.E.serviceProvider.directWeb.getRedirectResult();case 5:n=e.sent,f.E.serviceProvider.postboxKey=new(m())(n.result&&n.result.privateKey,"hex"),Z(n.result.userInfo),A(n.result.privateKey),R(),e.next=13;break;case 12:N||t("/login");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();e();var n=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new p.qR({config:{chainConfig:{chainId:"0x33",rpcTarget:"https://erpc.apothem.network",displayName:"XDC APOTHEM",blockExplorer:"https://explorer.apothem.network/",ticker:"XDC",tickerName:"Xinfin"}}}),!N){e.next=6;break}return localStorage.setItem("pkey",N),e.next=5,t.setupProvider(N);case 5:D(t.provider);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}),[N]),(0,c.useEffect)((function(){N&&T&&E&&O()}),[N,T,E]),(0,c.useEffect)((function(){l&&t("/user/dashboard")}),[l]);var O=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,s,a,c,i,o,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new v.Q(T),e.next=3,t.getNetwork();case 3:return s=e.sent,a=s.chainId,localStorage.setItem("chainId",a),console.log("chainId",a),c=t.getSigner(),e.next=10,c.getAddress();case 10:i=e.sent,o=y.cz.find((function(e){return e.networkID===a})),u={provider:t,address:i,signer:c,connected:!0,chainId:a,symbol:o.symbol,networkName:o.networkName},n((0,w.fY)(u)),l={firstName:E.name,email:E.email,walletAddress:i,photo:E.profileImage,origin:E.typeOfLogin},console.log("userInfo",l),n((0,x.x4)(l,"user"));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.E){e.next=3;break}return alert("tKey not initialized yet"),e.abrupt("return");case 3:return e.prev=3,e.next=6,f.E.initialize();case 6:return console.log(f.E),e.prev=7,e.next=10,f.E.modules.webStorage.inputShareFromWebStorage();case 10:e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(7),console.log("e",e.t0),e.next=17,z();case 17:if(console.log(f.E),t=f.E.getKeyDetails(),n=t.requiredShares,console.log(f.E),!(n<=0)){e.next=25;break}return e.next=23,f.E.reconstructKey();case 23:s=e.sent,I(s&&s.privKey.toString("hex"));case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(3),console.log("error",e.t1);case 30:case"end":return e.stop()}}),e,null,[[3,27],[7,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.E){e.next=3;break}return alert("tKey not initialized yet"),e.abrupt("return");case 3:d()("Enter password (>10 characters)",{content:"input"}).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>10)){e.next=29;break}return e.prev=1,e.next=4,f.E.modules.securityQuestions.inputShareFromSecurityQuestions(t);case 4:if(n=f.E.getKeyDetails(),!(n.requiredShares<=0)){e.next=10;break}return e.next=8,f.E.reconstructKey();case 8:s=e.sent,I(s&&s.privKey.toString("hex"));case 10:return e.next=12,f.E.generateNewShare();case 12:return a=e.sent,e.next=15,f.E.outputShareStore(a.newShareIndex);case 15:return c=e.sent,e.next=18,f.E.modules.webStorage.storeDeviceShare(c);case 18:d()("Success","Successfully logged you in with the recovery password.","success"),console.log("Successfully logged you in with the recovery password."),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(1),d()("Error",e.t0&&e.t0.message.toString(),"error"),console.log("error"),Z(null);case 27:e.next=31;break;case 29:d()("Error","Password must be >= 11 characters","error"),console.log("error");case 31:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)("div",{className:"bg-gradient2 min-vh-100 align-items-center d-flex justify-content-center pt-2 pt-sm-5 pb-4 pb-sm-5",children:(0,b.jsx)("div",{className:"container",children:(0,b.jsxs)("div",{className:"row justify-content-center",children:[(0,b.jsxs)("div",{className:"col-xl-12",children:[(0,b.jsxs)("div",{className:"row g-0 d-flex justify-content-center",children:[(0,b.jsx)("span",{className:"pln",children:" "}),(0,b.jsx)("div",{className:"spinner-border text-primary m-2",role:"status",children:(0,b.jsx)("span",{className:"visually-hidden",children:(0,b.jsx)("span",{className:"pln",children:"Loading..."})})}),(0,b.jsx)("span",{className:"pln"}),(0,b.jsx)("h4",{className:"text-center",children:"Loading your dashboard..."})]})," ",(0,b.jsx)("div",{className:"poweredby",children:(0,b.jsx)("img",{src:"assets/images/poweredby.png",className:"align-self-center",alt:"logo-img",height:50})})]})," "]})})})}},53071:function(e,t,n){"use strict";n.d(t,{E:function(){return u}});var r=n(91247),s=n(77630),a=n(62499),c={web3AuthClientId:"BEglQSgt4cUWcj6SKRdu5QkOXTsePmMcusG5EAoyjyOYKlVRjIF1iCNnMOTfpzCiunHRrMui8TIwQPXdkQ8Yxuk",baseUrl:window.location.origin,redirectPathName:"auth",enableLogging:!0,uxMode:"redirect",network:"cyan"},i=new s.ZP,o=new a.ZP,u=new r.Z({modules:{webStorage:i,securityQuestions:o},customAuthArgs:c})},49111:function(e,t){"use strict";t.Z=function(e){var t=document.createElement("script");t.src=e,t.async=!0,document.body.appendChild(t)}},69935:function(e,t){"use strict";t.Z=function(e){for(var t=document.getElementsByTagName("script"),n=t.length;n>=0;n--)t[n]&&null!==t[n].getAttribute("src")&&-1!==t[n].getAttribute("src").indexOf("".concat(e))&&t[n].parentNode.removeChild(t[n])}},993:function(){},35883:function(){},80950:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},56619:function(){},24654:function(){},77108:function(){},71156:function(){},52361:function(){},94616:function(){},88924:function(){},55024:function(){}}]);
//# sourceMappingURL=79.a3f361de.chunk.js.map